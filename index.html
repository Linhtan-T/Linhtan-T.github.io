<!Doctype: HTML w/ Processing>

<html>

  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Processing Demo</title>
      <script type="text/javascript" src="js/processing.js"></script>
  </head>
  
  <body>
    <h1>Granada High Tutorial</h1>
    <p>Processing demo</p>
    
    <script type="text/processing">
    
           // Processing 3/4
      import processing.serial.*;
      
      Serial port;
      int pot = 0;          // value from Arduino (0–1023)
      int circleY = 200;    // fixed Y position
      
      void setup() {
        size(600, 400);
        // open your serial port directly
        port = new Serial(this, "/dev/cu.usbserial-1140", 115200);
        port.bufferUntil('\n');
      }
      
      void draw() {
        background(32);
      
        // Map potentiometer 0–1023 to screen width
        float x = map(pot, 0, 1023, 20, width - 20);
      
        // Draw circle that moves horizontally
        noStroke();
        fill(0, 200, 255);
        ellipse(x, circleY, 40, 40);
      
        // Show value
        fill(255);
        textSize(14);
        text("Pot value: " + pot, 10, 20);
      }
      
      // This runs every time a full line arrives from Arduino
      void serialEvent(Serial p) {
        String s = trim(p.readStringUntil('\n'));
        if (s == null || s.length() == 0) return;
      
        try {
          int v = Integer.parseInt(s);
          pot = constrain(v, 0, 1023);
        } catch (Exception e) {
          // ignore if something funky arrives
        }
      }



    </script>
    <canvas id="sketch" style="border: 1px solid black;"></canvas>
    
  </body>
  
</html>
